<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css_PanelAdministrador/panelProblemasCompetitiva_styles.css">
    <title>Buscador</title>
    <script src="../js_PanelAdministrador/panelProblemasCompetitiva.js" defer></script>
    <link rel="stylesheet" href="/css_global/navbar.css" />
    <script src="/js_global/navbar.js" defer></script>
</head>
<body>

  <header>
    <div class="logo" id="home">Nombre Proyecto</div>
    <button class="menu-toggle" aria-label="Abrir men칰">&#9776;</button> <!-- Icono hamburguesa -->
    <nav class="nav-menu">
        <ul>
            <li><a href="/BuscadorIntershipsV2">Interns</a></li>
            <li><a href="/verMiPerfil">Mi Perfil</a></li>
            <li><a href="#avisos" id="abrir-modal">Avisos</a></li> <!-- ID para manejar el evento -->
            <li><a href="/ExplorarEntrevistadores">Explorar</a></li>
            <li><a href="/listaPublicaciones">Blog</a></li>
            <li><a href="/ProblemasProgramacionCompetitiva">Problemas</a></li>
        </ul>
    </nav>
</header>

  <!-- Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
        <span class="close-button" id="cerrar-modal">&times;</span> <!-- Bot칩n de cierre -->
        <h2>Avisos</h2>
        <div id="avisos_contenedor">
            <p>Este es el contenido del modal de avisos.</p>
            <p>Este es el contenido del modal de avisos.</p>
            <p>Este es el contenido del modal de avisos.</p>
            <p>Este es el contenido del modal de avisos.</p>
        </div>
    </div>
  </div>

  <!-- Modal agregar problema -->
  <div id="modal-agregar-problema" class="modal-agregar-problema">
    <div class="modal-agregar-problema-content">
        <div class="modal-agregar-problema-header">
            <h2>Informaci칩n del Problema</h2>
            <span class="close-button" id="cerrar-modal-agregar-problema">&times;</span>
        </div>
        <div class="modal-agregar-problema-body">
            <form id="reunion-form">
                <div class="form-group">
                    <label for="nombre-problema">Nombre del Problema</label>
                    <input type="text" id="nombre-problema-agregar" name="nombre-problema" placeholder="Nombre del Problema">
                </div>
                <div class="form-group">
                    <label for="plataforma">Plataforma</label>
                    <select id="plataforma-agregar" name="plataforma">
                      <% it.plataformas.forEach(plataforma => { %> 
                        <option value="<%= plataforma.idPlataforma %>"><%= plataforma.nombrePlataforma %></option>
                      <% }); %>
                    </select>
                </div>
                <div class="form-group">
                  <label for="dificultad">Dificultad</label>
                  <select id="dificultad-agregar" name="dificultad">
                      <option value="1">F치cil</option>
                      <option value="2">Intermedio</option>
                      <option value="3">Dif칤cil</option>
                  </select>
              </div>
                <div class="form-group">
                    <label for="categorias">Categorias</label>
                    <div class="lista-categorias">
                      <% it.categorias.forEach(categoria => { %>
                      <div class="categoria-agregar" data-id="<%= categoria.idCategoria %>-agregar">
                          <input type="checkbox" name="seleccion-categoria" id="<%=categoria.nombreCategoria%>-agregar" value="<%= categoria.idCategoria %>">
                          <label for="categoria-<%= categoria %>-agregar"><%= categoria.nombreCategoria %></label>
                      </div>
                      <% }); %>
                  </div>                  
                </div>
                <div class="form-group">
                    <label for="link-problema">Link del Problema</label>
                    <input type="text" id="link-problema-agregar" name="link-problema" placeholder="Link del Problema">
                </div>
            </form>
        </div>
        <div class="modal-agregar-problema-footer">
            <button class="cancel" id="cancelar-agregar-problema">Cancelar</button>
            <!-- <button class="delete" id="eliminar-agregar-problema">Eliminar</button> -->
            <button class="accept" id="aceptar-agregar-problema" onclick="agregarProblema()">Aceptar</button>
        </div>
    </div>
  </div>   

  <!-- Modal para modificar Problema -->
  <div id="modal-modificar-problema" class="modal-modificar-problema">
    <div class="modal-modificar-problema-content">
        <div class="modal-modificar-problema-header">
            <h2>Informaci칩n del Problema</h2>
            <span class="close-button" id="cerrar-modal-modificar-problema">&times;</span>
        </div>
        <% it.problemas.forEach(problema => { %>
        <div class="modal-modificar-problema-body">
            <form id="reunion-form">
                <div class="form-group">
                    <input type="hidden" id="id-problema" name="id-problema" value="<%= problema.idProblema %>">
                </div>
                <div class="form-group">
                    <label for="nombre-problema">Nombre del Problema</label>
                    <input type="text" id="nombre-problema" name="nombre-problema" value="<%= problema.nombreProblema %>">
                </div>
                <div class="form-group">
                    <label for="plataforma">Plataforma</label>


                    <select id="plataforma" name="plataforma">
                        <% it.plataformas.forEach(plataforma => { %> 
                          <option value="<%= plataforma.idPlataforma %>" <%= problema.plataformaProblema === plataforma.nombrePlataforma ? "selected" : "" %>><%= plataforma.nombrePlataforma %></option>
                        <% }); %>
                    </select>
                </div>
                <div class="form-group">
                  <label for="dificultad">Dificultad</label>
                  <select id="dificultad" name="dificultad">
                      <% it.dificultades.forEach(dificultad => { %> 
                        <option value="<%= dificultad.idDificultad %>" <%= problema.dificultadProblema === dificultad.nombreDificultad ? "selected" : "" %>><%= dificultad.nombreDificultad %></option>
                      <% }); %>
                  </select>
              </div>
                <div class="form-group">
                    <label for="categorias">Categorias</label>
                    <div class="lista-categorias">
                      <% it.categorias.forEach(categoria => { %>
                      <div class="categoria" data-id="<%= categoria.idCategoria %>">
                          <input type="checkbox" name="seleccion-categoria" id="<%=categoria.nombreCategoria%>" value="<%= categoria.idCategoria %>">
                          <label for="categoria-<%= categoria %>"><%= categoria.nombreCategoria %></label>
                      </div>
                      <% }); %>
                      <% problema.categoriasProblema.forEach(categoria => { %>
                        <script>
                          document.getElementById("<%=categoria%>".trim()).checked = true;
                        </script>  
                      <% }); %>
                  </div>                  
                </div>
                <div class="form-group">
                    <label for="link-problema">Link del Problema</label>
                    <input type="text" id="link-problema" name="link-problema" value="<%= problema.urlProblema %>">
                </div>
            </form>
        </div>
        <% }); %>
        <div class="modal-modificar-problema-footer">
            <button class="cancel" id="cancelar-modificar-problema">Cancelar</button>
            <button class="delete" id="eliminar-modificar-problema" onclick="eliminarProblema()">Eliminar</button>
            <button class="accept" id="aceptar-modificar-problema" onclick="modificarProblema()">Guardar</button>
        </div>
    </div>
  </div>   

  <main id="main-content">

    <div class="buscador">
      <input 
        type="text" 
        placeholder="Buscar..." 
        class="input-buscar" 
        id="buscarProblema"
      />
      <button class="btn-buscar" onclick="buscarProblema()">
        游댌
      </button>
    </div>

    <div class="agregar-problema">
      <button id="agregar-problema">+ Agregar Problema</button>
    </div>
  
    <div class="encabezado-problemas">Problema</div>
  
    <div class="contenedor-problemas">
      <% it.problemas.forEach(problema => { %>
        <div class="problema">
          <div class="titulo-problema"> <i><%= problema.nombreProblema %></i> </div>
            <div class="descripcion-problema">
              <div class="plataforma">Plataforma: <%= problema.plataformaProblema %> </div>
              <div class="dificultad">Dificultad: <%= problema.dificultadProblema %></div>
              <div class="subtitulo">Categor칤as: </div>
              <div class="topicos">
                <% problema.categoriasProblema.forEach(categoria => { %>
                  <div class="tema"> <i><%= categoria %></i> </div>
                <% }); %>
              </div>
              <div class="link-problema">
                <a href="<%= problema.urlProblema %>" target="_blank">Ver problema</a>
              </div>
            </div>
        </div>
      <% }); %>
    </div>

  </main>
</body>
</html>
